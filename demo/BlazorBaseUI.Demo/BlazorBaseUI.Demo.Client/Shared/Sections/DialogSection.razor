@using BlazorBaseUI.Dialog

<ComponentShowcase ComponentName="Dialog"
                   Description="A modal dialog that interrupts the user with important content and expects a response."
                   BaseRoute="/dialog"
                   IsWasmMode="IsWasmMode">

    <DemoSection Title="Basic Dialog"
                 Description="A simple modal dialog with trigger, content, title, description, and close button."
                 CodeSnippet="@BasicCodeSnippet">
        <DialogRoot>
            <DialogTrigger ClassValue="@(s => TriggerClass(s))">
                Open Dialog
            </DialogTrigger>
            <DialogPortal>
                <DialogBackdrop ClassValue="@(s => BackdropClass(s))" />
                <DialogPopup ClassValue="@(s => PopupClass(s))">
                    <DialogTitle class="text-lg font-semibold text-gray-900">
                        Welcome to BlazorBaseUI
                    </DialogTitle>
                    <DialogDescription class="mt-2 text-sm text-gray-600">
                        This is a basic modal dialog. Click the close button or press Escape to dismiss.
                    </DialogDescription>
                    <div class="mt-6 flex justify-end">
                        <DialogClose ClassValue="@(s => CloseButtonClass(s))">
                            Close
                        </DialogClose>
                    </div>
                </DialogPopup>
            </DialogPortal>
        </DialogRoot>
    </DemoSection>

    <DemoSection Title="Controlled State"
                 Description="Control the dialog open state externally with callbacks."
                 CodeSnippet="@ControlledCodeSnippet">
        <div class="flex flex-col gap-4">
            <div class="flex items-center gap-3">
                <button class="inline-flex items-center gap-2 rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-medium text-white shadow-sm transition-colors hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:outline-none"
                        @onclick="@(() => controlledOpen = true)">
                    Open Dialog Externally
                </button>
                <span class="inline-flex items-center rounded-full bg-gray-100 px-2.5 py-0.5 text-xs font-medium text-gray-800">
                    @(controlledOpen ? "Open" : "Closed")
                </span>
            </div>
            <DialogRoot Open="@controlledOpen"
                        OpenChanged="@(e => controlledOpen = e)"
                        OnOpenChange="HandleOpenChange"
                        Modal="ModalMode.True">
                <DialogTrigger ClassValue="@(s => TriggerClass(s))">
                    Toggle Dialog
                </DialogTrigger>
                <DialogPortal>
                    <DialogBackdrop ClassValue="@(s => BackdropClass(s))" />
                    <DialogPopup ClassValue="@(s => PopupClass(s))">
                        <DialogTitle class="text-lg font-semibold text-gray-900">
                            Controlled Dialog
                        </DialogTitle>
                        <DialogDescription class="mt-2 text-sm text-gray-600">
                            This dialog's state is controlled externally.
                        </DialogDescription>
                        <div class="mt-4 rounded bg-gray-50 p-3 font-mono text-xs">
                            <p>Last reason: <strong>@lastReason</strong></p>
                        </div>
                        <div class="mt-6 flex justify-end">
                            <DialogClose ClassValue="@(s => CloseButtonClass(s))">
                                Close
                            </DialogClose>
                        </div>
                    </DialogPopup>
                </DialogPortal>
            </DialogRoot>
        </div>
    </DemoSection>

    <DemoSection Title="Closing Strategies"
                 Description="Configure how the dialog can be closed: via ESC key, backdrop click, or close button."
                 CodeSnippet="@ClosingCodeSnippet">
        <div class="flex flex-wrap gap-4">
            <DialogRoot>
                <DialogTrigger ClassValue="@(s => TriggerClass(s))">
                    Normal (All methods)
                </DialogTrigger>
                <DialogPortal>
                    <DialogBackdrop ClassValue="@(s => BackdropClass(s))" />
                    <DialogPopup ClassValue="@(s => PopupClass(s))">
                        <DialogTitle class="text-lg font-semibold text-gray-900">
                            Normal Dialog
                        </DialogTitle>
                        <DialogDescription class="mt-2 text-sm text-gray-600">
                            Close via: ESC, backdrop click, or close button.
                        </DialogDescription>
                        <div class="mt-6 flex justify-end">
                            <DialogClose ClassValue="@(s => CloseButtonClass(s))">
                                Close
                            </DialogClose>
                        </div>
                    </DialogPopup>
                </DialogPortal>
            </DialogRoot>

            <DialogRoot DismissOnEscape="false">
                <DialogTrigger ClassValue="@(s => TriggerClass(s))">
                    No ESC Key
                </DialogTrigger>
                <DialogPortal>
                    <DialogBackdrop ClassValue="@(s => BackdropClass(s))" />
                    <DialogPopup ClassValue="@(s => PopupClass(s))">
                        <DialogTitle class="text-lg font-semibold text-gray-900">
                            ESC Disabled
                        </DialogTitle>
                        <DialogDescription class="mt-2 text-sm text-gray-600">
                            The ESC key won't close this dialog. Use backdrop or close button.
                        </DialogDescription>
                        <div class="mt-6 flex justify-end">
                            <DialogClose ClassValue="@(s => CloseButtonClass(s))">
                                Close
                            </DialogClose>
                        </div>
                    </DialogPopup>
                </DialogPortal>
            </DialogRoot>

            <DialogRoot DismissOnOutsidePress="false">
                <DialogTrigger ClassValue="@(s => TriggerClass(s))">
                    No Backdrop Click
                </DialogTrigger>
                <DialogPortal>
                    <DialogBackdrop ClassValue="@(s => BackdropClass(s))" />
                    <DialogPopup ClassValue="@(s => PopupClass(s))">
                        <DialogTitle class="text-lg font-semibold text-gray-900">
                            Backdrop Click Disabled
                        </DialogTitle>
                        <DialogDescription class="mt-2 text-sm text-gray-600">
                            Clicking the backdrop won't close this dialog. Use ESC or close button.
                        </DialogDescription>
                        <div class="mt-6 flex justify-end">
                            <DialogClose ClassValue="@(s => CloseButtonClass(s))">
                                Close
                            </DialogClose>
                        </div>
                    </DialogPopup>
                </DialogPortal>
            </DialogRoot>
        </div>
    </DemoSection>

    <DemoSection Title="Modal Modes"
                 Description="Compare True modal (with backdrop), TrapFocus (focus trap only), and False (non-modal)."
                 CodeSnippet="@ModalModesCodeSnippet">
        <div class="flex flex-wrap gap-4">
            <DialogRoot Modal="ModalMode.True">
                <DialogTrigger ClassValue="@(s => TriggerClass(s))">
                    Modal (True)
                </DialogTrigger>
                <DialogPortal>
                    <DialogBackdrop ClassValue="@(s => BackdropClass(s))" />
                    <DialogPopup ClassValue="@(s => PopupClass(s))">
                        <DialogTitle class="text-lg font-semibold text-gray-900">
                            Full Modal
                        </DialogTitle>
                        <DialogDescription class="mt-2 text-sm text-gray-600">
                            This has a backdrop and focus trap. The default modal behavior.
                        </DialogDescription>
                        <div class="mt-6 flex justify-end">
                            <DialogClose ClassValue="@(s => CloseButtonClass(s))">
                                Close
                            </DialogClose>
                        </div>
                    </DialogPopup>
                </DialogPortal>
            </DialogRoot>

            <DialogRoot Modal="ModalMode.TrapFocus">
                <DialogTrigger ClassValue="@(s => TriggerClass(s))">
                    TrapFocus Only
                </DialogTrigger>
                <DialogPortal>
                    <DialogPopup ClassValue="@(s => PopupClassNoBackdrop(s))">
                        <DialogTitle class="text-lg font-semibold text-gray-900">
                            Focus Trap Only
                        </DialogTitle>
                        <DialogDescription class="mt-2 text-sm text-gray-600">
                            No backdrop, but focus is still trapped within the dialog.
                        </DialogDescription>
                        <div class="mt-6 flex justify-end">
                            <DialogClose ClassValue="@(s => CloseButtonClass(s))">
                                Close
                            </DialogClose>
                        </div>
                    </DialogPopup>
                </DialogPortal>
            </DialogRoot>

            <DialogRoot Modal="ModalMode.False">
                <DialogTrigger ClassValue="@(s => TriggerClass(s))">
                    Non-Modal
                </DialogTrigger>
                <DialogPortal>
                    <DialogPopup ClassValue="@(s => PopupClassNoBackdrop(s))">
                        <DialogTitle class="text-lg font-semibold text-gray-900">
                            Non-Modal Dialog
                        </DialogTitle>
                        <DialogDescription class="mt-2 text-sm text-gray-600">
                            No backdrop and no focus trap. You can interact with the page behind.
                        </DialogDescription>
                        <div class="mt-6 flex justify-end">
                            <DialogClose ClassValue="@(s => CloseButtonClass(s))">
                                Close
                            </DialogClose>
                        </div>
                    </DialogPopup>
                </DialogPortal>
            </DialogRoot>
        </div>
    </DemoSection>

    <DemoSection Title="Nested Dialogs"
                 Description="Dialogs can open other dialogs with proper stacking and focus management."
                 CodeSnippet="@NestedCodeSnippet">
        <DialogRoot>
            <DialogTrigger ClassValue="@(s => TriggerClass(s))">
                Open First Dialog
            </DialogTrigger>
            <DialogPortal>
                <DialogBackdrop ClassValue="@(s => BackdropClass(s))" />
                <DialogPopup ClassValue="@(s => PopupClass(s))">
                    <DialogTitle class="text-lg font-semibold text-gray-900">
                        First Dialog
                    </DialogTitle>
                    <DialogDescription class="mt-2 text-sm text-gray-600">
                        This is the first level dialog. Open another dialog from here.
                    </DialogDescription>
                    <div class="mt-4">
                        <DialogRoot>
                            <DialogTrigger ClassValue="@(s => SecondaryTriggerClass(s))">
                                Open Second Dialog
                            </DialogTrigger>
                            <DialogPortal>
                                <DialogBackdrop ClassValue="@(s => BackdropClass(s))" />
                                <DialogPopup ClassValue="@(s => PopupClass(s))">
                                    <DialogTitle class="text-lg font-semibold text-gray-900">
                                        Second Dialog
                                    </DialogTitle>
                                    <DialogDescription class="mt-2 text-sm text-gray-600">
                                        This is a nested dialog. You can go deeper!
                                    </DialogDescription>
                                    <div class="mt-4">
                                        <DialogRoot>
                                            <DialogTrigger ClassValue="@(s => SecondaryTriggerClass(s))">
                                                Open Third Dialog
                                            </DialogTrigger>
                                            <DialogPortal>
                                                <DialogBackdrop ClassValue="@(s => BackdropClass(s))" />
                                                <DialogPopup ClassValue="@(s => PopupClass(s))">
                                                    <DialogTitle class="text-lg font-semibold text-gray-900">
                                                        Third Dialog
                                                    </DialogTitle>
                                                    <DialogDescription class="mt-2 text-sm text-gray-600">
                                                        Three levels deep! Each ESC press closes one dialog at a time.
                                                    </DialogDescription>
                                                    <div class="mt-6 flex justify-end">
                                                        <DialogClose ClassValue="@(s => CloseButtonClass(s))">
                                                            Close
                                                        </DialogClose>
                                                    </div>
                                                </DialogPopup>
                                            </DialogPortal>
                                        </DialogRoot>
                                    </div>
                                    <div class="mt-6 flex justify-end">
                                        <DialogClose ClassValue="@(s => CloseButtonClass(s))">
                                            Close
                                        </DialogClose>
                                    </div>
                                </DialogPopup>
                            </DialogPortal>
                        </DialogRoot>
                    </div>
                    <div class="mt-6 flex justify-end">
                        <DialogClose ClassValue="@(s => CloseButtonClass(s))">
                            Close
                        </DialogClose>
                    </div>
                </DialogPopup>
            </DialogPortal>
        </DialogRoot>
    </DemoSection>

    <DemoSection Title="Animations"
                 Description="Use CSS transitions with data attributes for smooth enter/exit animations."
                 CodeSnippet="@AnimationsCodeSnippet">
        <DialogRoot>
            <DialogTrigger ClassValue="@(s => TriggerClass(s))">
                Open Animated Dialog
            </DialogTrigger>
            <DialogPortal>
                <DialogBackdrop ClassValue="@(s => AnimatedBackdropClass(s))" />
                <DialogPopup ClassValue="@(s => AnimatedPopupClass(s))">
                    <DialogTitle class="text-lg font-semibold text-gray-900">
                        Animated Dialog
                    </DialogTitle>
                    <DialogDescription class="mt-2 text-sm text-gray-600">
                        This dialog uses CSS transitions for smooth enter and exit animations.
                        The backdrop fades and the popup scales in.
                    </DialogDescription>
                    <div class="mt-6 flex justify-end">
                        <DialogClose ClassValue="@(s => CloseButtonClass(s))">
                            Close
                        </DialogClose>
                    </div>
                </DialogPopup>
            </DialogPortal>
        </DialogRoot>
    </DemoSection>

    <DemoSection Title="Disabled States"
                 Description="Disabled trigger and close buttons prevent interaction."
                 CodeSnippet="@DisabledCodeSnippet">
        <div class="flex flex-wrap gap-4">
            <DialogRoot>
                <DialogTrigger Disabled="true" ClassValue="@(s => DisabledTriggerClass(s))">
                    Disabled Trigger
                </DialogTrigger>
                <DialogPortal>
                    <DialogBackdrop ClassValue="@(s => BackdropClass(s))" />
                    <DialogPopup ClassValue="@(s => PopupClass(s))">
                        <DialogTitle class="text-lg font-semibold text-gray-900">
                            You shouldn't see this
                        </DialogTitle>
                        <div class="mt-6 flex justify-end">
                            <DialogClose ClassValue="@(s => CloseButtonClass(s))">
                                Close
                            </DialogClose>
                        </div>
                    </DialogPopup>
                </DialogPortal>
            </DialogRoot>

            <DialogRoot>
                <DialogTrigger ClassValue="@(s => TriggerClass(s))">
                    Dialog with Disabled Close
                </DialogTrigger>
                <DialogPortal>
                    <DialogBackdrop ClassValue="@(s => BackdropClass(s))" />
                    <DialogPopup ClassValue="@(s => PopupClass(s))">
                        <DialogTitle class="text-lg font-semibold text-gray-900">
                            Disabled Close Button
                        </DialogTitle>
                        <DialogDescription class="mt-2 text-sm text-gray-600">
                            The close button is disabled. Use ESC or backdrop to close.
                        </DialogDescription>
                        <div class="mt-6 flex justify-end">
                            <DialogClose Disabled="true" ClassValue="@(s => DisabledCloseButtonClass(s))">
                                Close (Disabled)
                            </DialogClose>
                        </div>
                    </DialogPopup>
                </DialogPortal>
            </DialogRoot>
        </div>
    </DemoSection>

    <DemoSection Title="Keep Mounted"
                 Description="Keep the dialog in the DOM when closed (inspect elements to verify)."
                 CodeSnippet="@KeepMountedCodeSnippet">
        <DialogRoot>
            <DialogTrigger ClassValue="@(s => TriggerClass(s))">
                Open (Keep Mounted)
            </DialogTrigger>
            <DialogPortal KeepMounted="true">
                <DialogBackdrop ClassValue="@(s => BackdropClass(s))" />
                <DialogPopup ClassValue="@(s => PopupClass(s))">
                    <DialogTitle class="text-lg font-semibold text-gray-900">
                        Keep Mounted Dialog
                    </DialogTitle>
                    <DialogDescription class="mt-2 text-sm text-gray-600">
                        This dialog stays in the DOM when closed. Inspect the page to verify!
                    </DialogDescription>
                    <div class="mt-6 flex justify-end">
                        <DialogClose ClassValue="@(s => CloseButtonClass(s))">
                            Close
                        </DialogClose>
                    </div>
                </DialogPopup>
            </DialogPortal>
        </DialogRoot>
    </DemoSection>

    <DemoSection Title="Handle (Detached Triggers)"
                 Description="Use a handle to connect triggers placed outside the DialogRoot for shared dialog content.">
        <div class="flex flex-col gap-4">
            <div class="flex gap-4">
                <DialogTypedTrigger TPayload="string"
                                Handle="@detachedDialogHandle"
                                Id="action-1"
                                Payload="@("Edit Profile - Modify your personal information")"
                                ClassValue="@(s => TriggerClass(s))">
                    Edit Profile
                </DialogTypedTrigger>
                <DialogTypedTrigger TPayload="string"
                                Handle="@detachedDialogHandle"
                                Id="action-2"
                                Payload="@("Change Password - Update your security credentials")"
                                ClassValue="@(s => TriggerClass(s))">
                    Change Password
                </DialogTypedTrigger>
                <DialogTypedTrigger TPayload="string"
                                Handle="@detachedDialogHandle"
                                Id="action-3"
                                Payload="@("Delete Account - Permanently remove your account")"
                                ClassValue="@(s => DangerTriggerClass(s))">
                    Delete Account
                </DialogTypedTrigger>
            </div>

            <DialogRoot Handle="@detachedDialogHandle">
                <ChildContentWithPayload>
                    @{
                        var handlePayloadContext = context;
                    }
                    <DialogPortal>
                        <DialogBackdrop ClassValue="@(s => BackdropClass(s))" />
                        <DialogPopup ClassValue="@(s => PopupClass(s))">
                            <DialogTitle class="text-lg font-semibold text-gray-900">
                                Action Details
                            </DialogTitle>
                            <DialogDescription class="mt-2 text-sm text-gray-600">
                                @(handlePayloadContext.Payload?.ToString() ?? "Select an action to see details")
                            </DialogDescription>
                            <div class="mt-6 flex justify-end gap-3">
                                <DialogClose ClassValue="@(s => SecondaryButtonClass(s))">
                                    Cancel
                                </DialogClose>
                                <DialogClose ClassValue="@(s => CloseButtonClass(s))">
                                    Confirm
                                </DialogClose>
                            </div>
                        </DialogPopup>
                    </DialogPortal>
                </ChildContentWithPayload>
            </DialogRoot>

            <div class="flex gap-2">
                <button class="rounded bg-blue-500 px-3 py-1.5 text-sm text-white hover:bg-blue-600"
                        @onclick="@(() => detachedDialogHandle.Open("action-1"))">
                    Open Edit Profile
                </button>
                <button class="rounded bg-gray-200 px-3 py-1.5 text-sm hover:bg-gray-300"
                        @onclick="@(() => detachedDialogHandle.Close())">
                    Close
                </button>
            </div>
        </div>
        <div class="mt-3 rounded bg-gray-100 p-3 text-sm text-gray-700">
            <p>Triggers are placed <strong>outside</strong> the DialogRoot but share a common handle.</p>
            <p class="mt-1">The handle also allows imperative control via <code>Open(triggerId)</code> and <code>Close()</code>.</p>
        </div>
    </DemoSection>

    <DemoSection Title="Typed Payload with Handle"
                 Description="Use generics for type-safe payloads with complex data objects.">
        <div class="flex flex-col gap-4">
            <div class="flex gap-4">
                @foreach (var task in sampleTasks)
                {
                    <DialogTypedTrigger TPayload="TaskInfo"
                                    Handle="@typedDialogHandle"
                                    Id="@($"task-{task.Id}")"
                                    Payload="@task"
                                    ClassValue="@(s => TriggerClass(s))">
                        @task.Title
                    </DialogTypedTrigger>
                }
            </div>

            <DialogRoot Handle="@typedDialogHandle">
                <ChildContentWithPayload>
                    @{
                        var typedPayloadContext = context;
                        var taskInfo = typedPayloadContext.Payload as TaskInfo;
                    }
                    <DialogPortal>
                        <DialogBackdrop ClassValue="@(s => BackdropClass(s))" />
                        <DialogPopup ClassValue="@(s => PopupClass(s))" StyleValue="@(_ => "max-width: 400px;")">
                            @if (taskInfo is not null)
                            {
                                <DialogTitle class="text-lg font-semibold text-gray-900">
                                    @taskInfo.Title
                                </DialogTitle>
                                <div class="mt-4 space-y-3">
                                    <DialogDescription class="text-sm text-gray-600">
                                        @taskInfo.Description
                                    </DialogDescription>
                                    <div class="flex items-center gap-2 text-sm">
                                        <span class="inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium @(GetPriorityClass(taskInfo.Priority))">
                                            @taskInfo.Priority Priority
                                        </span>
                                        <span class="text-gray-400">|</span>
                                        <span class="text-gray-600">Due: @taskInfo.DueDate.ToString("MMM dd, yyyy")</span>
                                    </div>
                                    <div class="text-sm">
                                        <span class="font-medium text-gray-700">Status:</span>
                                        <span class="ml-1 @(taskInfo.IsComplete ? "text-green-600" : "text-yellow-600")">
                                            @(taskInfo.IsComplete ? "Completed" : "In Progress")
                                        </span>
                                    </div>
                                </div>
                            }
                            else
                            {
                                <DialogTitle class="text-lg font-semibold text-gray-900">
                                    Task Details
                                </DialogTitle>
                                <DialogDescription class="mt-2 text-sm text-gray-600">
                                    Click a task to see its details.
                                </DialogDescription>
                            }
                            <div class="mt-6 flex justify-end gap-3">
                                <DialogClose ClassValue="@(s => SecondaryButtonClass(s))">
                                    Cancel
                                </DialogClose>
                                <DialogClose ClassValue="@(s => CloseButtonClass(s))">
                                    @(taskInfo?.IsComplete == true ? "Reopen" : "Mark Complete")
                                </DialogClose>
                            </div>
                        </DialogPopup>
                    </DialogPortal>
                </ChildContentWithPayload>
            </DialogRoot>
        </div>
        <div class="mt-3 rounded bg-gray-100 p-3 text-sm text-gray-700">
            <p>Using <code>DialogTypedTrigger&lt;TaskInfo&gt;</code> and <code>DialogHandle&lt;TaskInfo&gt;</code> provides compile-time type safety.</p>
        </div>
    </DemoSection>

    <DemoSection Title="Confirmation Dialog"
                 Description="A complete example of a confirmation dialog with actions."
                 CodeSnippet="@ConfirmationCodeSnippet">
        <DialogRoot>
            <DialogTrigger ClassValue="@(s => DangerTriggerClass(s))">
                Delete Item
            </DialogTrigger>
            <DialogPortal>
                <DialogBackdrop ClassValue="@(s => BackdropClass(s))" />
                <DialogPopup ClassValue="@(s => PopupClass(s))">
                    <DialogTitle class="text-lg font-semibold text-gray-900">
                        Confirm Deletion
                    </DialogTitle>
                    <DialogDescription class="mt-2 text-sm text-gray-600">
                        Are you sure you want to delete this item? This action cannot be undone.
                    </DialogDescription>
                    <div class="mt-6 flex justify-end gap-3">
                        <DialogClose ClassValue="@(s => SecondaryButtonClass(s))">
                            Cancel
                        </DialogClose>
                        <DialogClose ClassValue="@(s => DangerButtonClass(s))">
                            Delete
                        </DialogClose>
                    </div>
                </DialogPopup>
            </DialogPortal>
        </DialogRoot>
    </DemoSection>

</ComponentShowcase>

@code {
    private bool controlledOpen;
    private OpenChangeReason lastReason = OpenChangeReason.None;

    [Parameter]
    public bool IsWasmMode { get; set; }

    // Handle for detached triggers demo (string payload)
    private readonly DialogHandle<string> detachedDialogHandle = new();

    // Handle for typed payload demo
    private readonly DialogHandle<TaskInfo> typedDialogHandle = new();

    // Sample data for typed payload demo
    private readonly List<TaskInfo> sampleTasks =
    [
        new TaskInfo(1, "Review PR", "Review the pull request for the new feature", "High", DateTime.Now.AddDays(1), false),
        new TaskInfo(2, "Update Docs", "Update the documentation for the API changes", "Medium", DateTime.Now.AddDays(3), false),
        new TaskInfo(3, "Fix Bug", "Fix the reported bug in the login flow", "High", DateTime.Now.AddDays(-1), true)
    ];

    private record TaskInfo(int Id, string Title, string Description, string Priority, DateTime DueDate, bool IsComplete);

    private static string GetPriorityClass(string priority) => priority switch
    {
        "High" => "bg-red-100 text-red-700",
        "Medium" => "bg-yellow-100 text-yellow-700",
        "Low" => "bg-green-100 text-green-700",
        _ => "bg-gray-100 text-gray-700"
    };

    private void HandleOpenChange(DialogOpenChangeEventArgs args)
    {
        lastReason = args.Reason;
    }

    private Func<DialogTriggerState, string> TriggerClass => _ =>
        "inline-flex items-center justify-center rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm transition-colors hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed";

    private Func<DialogTriggerState, string> SecondaryTriggerClass => _ =>
        "inline-flex items-center justify-center rounded-md bg-gray-100 px-4 py-2 text-sm font-medium text-gray-700 shadow-sm transition-colors hover:bg-gray-200 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:outline-none";

    private Func<DialogTriggerState, string> DangerTriggerClass => _ =>
        "inline-flex items-center justify-center rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white shadow-sm transition-colors hover:bg-red-700 focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:outline-none";

    private Func<DialogTriggerState, string> DisabledTriggerClass => _ =>
        "inline-flex items-center justify-center rounded-md bg-gray-300 px-4 py-2 text-sm font-medium text-gray-500 cursor-not-allowed";

    private Func<DialogBackdropState, string> BackdropClass => _ =>
        "fixed inset-0 bg-black/50 z-50";

    private Func<DialogBackdropState, string> AnimatedBackdropClass => state =>
        $"fixed inset-0 bg-black/50 z-50 transition-opacity duration-200 {(state.TransitionStatus == TransitionStatus.Starting || state.TransitionStatus == TransitionStatus.Ending ? "opacity-0" : "opacity-100")}";

    private Func<DialogPopupState, string> PopupClass => _ =>
        "fixed left-1/2 top-1/2 z-50 w-full max-w-md -translate-x-1/2 -translate-y-1/2 rounded-lg bg-white p-6 shadow-xl";

    private Func<DialogPopupState, string> PopupClassNoBackdrop => _ =>
        "fixed left-1/2 top-1/2 z-50 w-full max-w-md -translate-x-1/2 -translate-y-1/2 rounded-lg bg-white p-6 shadow-xl ring-1 ring-gray-200";

    private Func<DialogPopupState, string> AnimatedPopupClass => state =>
        $"fixed left-1/2 top-1/2 z-50 w-full max-w-md -translate-x-1/2 -translate-y-1/2 rounded-lg bg-white p-6 shadow-xl transition-all duration-200 {(state.TransitionStatus == TransitionStatus.Starting || state.TransitionStatus == TransitionStatus.Ending ? "opacity-0 scale-95" : "opacity-100 scale-100")}";

    private Func<DialogCloseState, string> CloseButtonClass => _ =>
        "inline-flex items-center justify-center rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm transition-colors hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:outline-none";

    private Func<DialogCloseState, string> SecondaryButtonClass => _ =>
        "inline-flex items-center justify-center rounded-md bg-gray-100 px-4 py-2 text-sm font-medium text-gray-700 shadow-sm transition-colors hover:bg-gray-200 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:outline-none";

    private Func<DialogCloseState, string> DangerButtonClass => _ =>
        "inline-flex items-center justify-center rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white shadow-sm transition-colors hover:bg-red-700 focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:outline-none";

    private Func<DialogCloseState, string> DisabledCloseButtonClass => _ =>
        "inline-flex items-center justify-center rounded-md bg-gray-300 px-4 py-2 text-sm font-medium text-gray-500 cursor-not-allowed";

    private const string BasicCodeSnippet = @"<DialogRoot>
    <DialogTrigger>Open Dialog</DialogTrigger>
    <DialogPortal>
        <DialogBackdrop />
        <DialogPopup>
            <DialogTitle>Welcome</DialogTitle>
            <DialogDescription>
                This is a basic modal dialog.
            </DialogDescription>
            <DialogClose>Close</DialogClose>
        </DialogPopup>
    </DialogPortal>
</DialogRoot>";

    private const string ControlledCodeSnippet = @"<DialogRoot Open=""@isOpen""
            OpenChanged=""@(e => isOpen = e)""
            OnOpenChange=""HandleOpenChange"">
    <DialogTrigger>Toggle Dialog</DialogTrigger>
    <DialogPortal>
        <DialogBackdrop />
        <DialogPopup>
            <DialogTitle>Controlled</DialogTitle>
            <DialogClose>Close</DialogClose>
        </DialogPopup>
    </DialogPortal>
</DialogRoot>";

    private const string ClosingCodeSnippet = @"// Disable ESC key
<DialogRoot DismissOnEscape=""false"">
    ...
</DialogRoot>

// Disable backdrop click
<DialogRoot DismissOnOutsidePress=""false"">
    ...
</DialogRoot>";

    private const string ModalModesCodeSnippet = @"// Full modal (default)
<DialogRoot Modal=""ModalMode.True"">
    ...
</DialogRoot>

// Focus trap only (no backdrop)
<DialogRoot Modal=""ModalMode.TrapFocus"">
    ...
</DialogRoot>

// Non-modal
<DialogRoot Modal=""ModalMode.False"">
    ...
</DialogRoot>";

    private const string NestedCodeSnippet = @"<DialogRoot>
    <DialogTrigger>Open First</DialogTrigger>
    <DialogPortal>
        <DialogBackdrop />
        <DialogPopup>
            <DialogTitle>First Dialog</DialogTitle>
            <DialogRoot>
                <DialogTrigger>Open Second</DialogTrigger>
                <DialogPortal>
                    <DialogBackdrop />
                    <DialogPopup>
                        <DialogTitle>Second Dialog</DialogTitle>
                        <DialogClose>Close</DialogClose>
                    </DialogPopup>
                </DialogPortal>
            </DialogRoot>
            <DialogClose>Close</DialogClose>
        </DialogPopup>
    </DialogPortal>
</DialogRoot>";

    private const string AnimationsCodeSnippet = @"<DialogBackdrop ClassValue=""@(s =>
    $""... transition-opacity duration-200
    {(s.TransitionStatus == TransitionStatus.Starting ? ""opacity-0"" : ""opacity-100"")}"")"" />

<DialogPopup ClassValue=""@(s =>
    $""... transition-all duration-200
    {(s.TransitionStatus == TransitionStatus.Starting ? ""opacity-0 scale-95"" : ""opacity-100 scale-100"")}"")"" />";

    private const string DisabledCodeSnippet = @"// Disabled trigger
<DialogTrigger Disabled=""true"">...</DialogTrigger>

// Disabled close button
<DialogClose Disabled=""true"">...</DialogClose>";

    private const string KeepMountedCodeSnippet = @"<DialogRoot>
    <DialogTrigger>Open</DialogTrigger>
    <DialogPortal KeepMounted=""true"">
        <DialogBackdrop />
        <DialogPopup>
            <DialogTitle>Keep Mounted</DialogTitle>
            <DialogClose>Close</DialogClose>
        </DialogPopup>
    </DialogPortal>
</DialogRoot>";

    private const string ConfirmationCodeSnippet = @"<DialogRoot>
    <DialogTrigger>Delete Item</DialogTrigger>
    <DialogPortal>
        <DialogBackdrop />
        <DialogPopup>
            <DialogTitle>Confirm Deletion</DialogTitle>
            <DialogDescription>
                Are you sure? This cannot be undone.
            </DialogDescription>
            <div class=""flex gap-3"">
                <DialogClose>Cancel</DialogClose>
                <DialogClose>Delete</DialogClose>
            </div>
        </DialogPopup>
    </DialogPortal>
</DialogRoot>";
}
