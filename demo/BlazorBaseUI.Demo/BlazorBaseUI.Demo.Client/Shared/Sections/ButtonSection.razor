@using BlazorBaseUI.Button

<ComponentShowcase ComponentName="Button"
                   Description="A versatile button component supporting custom tags, ARIA-compliant disabled states, and focus management."
                   BaseRoute="/button"
                   IsWasmMode="IsWasmMode">

    @* Scenario: Native button vs Custom element disabled behavior *@
    <DemoSection Title="Disabled States"
                 Description="Demonstrates how the component handles the 'disabled' attribute for native buttons versus 'aria-disabled' for custom elements.">
        <div class="flex flex-wrap gap-4">
            <div class="space-y-2">
                <p class="text-xs text-gray-500">Native Button (Uses 'disabled' attribute)</p>
                <Button Disabled="true"
                        class="cursor-not-allowed rounded bg-gray-200 px-4 py-2 text-gray-500">
                    Native Disabled
                </Button>
            </div>

            <div class="space-y-2">
                <p class="text-xs text-gray-500">Custom Span (Uses 'aria-disabled' and 'tabindex=-1')</p>
                <Button Disabled="true"
                        NativeButton="false"
                        As="span"
                        class="inline-block cursor-not-allowed rounded bg-gray-200 px-4 py-2 text-gray-500">
                    Custom Disabled
                </Button>
            </div>
        </div>
    </DemoSection>

    @* Scenario: The 'focusableWhenDisabled' prop logic *@
    <DemoSection Title="Focusable When Disabled"
                 Description="Allows the button to remain in the tab order while disabled, using aria-disabled='true' and preventing interactions via JS.">
        <div class="flex flex-wrap gap-4">
            <div class="space-y-2">
                <p class="text-xs text-gray-500">Native (Tab to me!)</p>
                <Button Disabled="true"
                        FocusableWhenDisabled="true"
                        class="rounded border border-blue-300 bg-white px-4 py-2 text-blue-300 outline-blue-500"
                        @onclick="HandleClick">
                    Focusable Native
                </Button>
            </div>

            <div class="space-y-2">
                <p class="text-xs text-gray-500">Custom Div (Tab to me!)</p>
                <Button Disabled="true"
                        FocusableWhenDisabled="true"
                        NativeButton="false"
                        As="div"
                        class="inline-block rounded border border-purple-300 bg-white px-4 py-2 text-purple-300 outline-purple-500"
                        @onclick="HandleClick">
                    Focusable Div
                </Button>
            </div>
        </div>
    </DemoSection>

    @* Scenario: Dynamic styling via ClassValue and StyleValue *@
    <DemoSection Title="Dynamic States & Styling"
                 Description="Using ClassValue and StyleValue callbacks to respond to the component state.">
        <div class="grid grid-cols-1 gap-6 md:grid-cols-2">
            <div class="space-y-2">
                <p class="text-xs text-gray-500">ClassValue (Dynamic Classes)</p>
                <Button ClassValue="@(state => state.Disabled
                                                                ? "rounded bg-gray-400 px-4 py-2 text-white cursor-wait"
                                                                : "rounded bg-blue-600 px-4 py-2 text-white hover:bg-blue-700")"
                        Disabled="isLoading"
                        @onclick="HandleOnClick">
                    @(isLoading ? "Loading..." : "Click to Disable (3s)")
                </Button>
            </div>

            <div class="space-y-2">
                <p class="text-xs text-gray-500">StyleValue (Inline Styles)</p>
                <Button class="rounded px-4 py-2 text-white"
                        StyleValue="@(state => state.Disabled
                                                                ? "background-color: #9ca3af; opacity: 0.5;"
                                                                : "background-color: #059669;")"
                        Disabled="isStyleDisabled"
                        @onclick="() => isStyleDisabled = !isStyleDisabled">
                    @(isStyleDisabled ? "Locked" : "Click to Toggle Style")
                </Button>
            </div>
        </div>
    </DemoSection>

    @* Scenario: Advanced rendering (TabIndex and RenderAs) *@
    <DemoSection Title="Advanced Configuration"
                 Description="Customizing tab order and rendering external component wrappers.">
        <div class="flex flex-wrap gap-4">
            <div class="space-y-2">
                <p class="text-xs text-gray-500">TabIndex = 1</p>
                <Button TabIndex="1"
                        class="rounded bg-slate-800 px-4 py-2 text-white"
                        @onclick="HandleClick">
                    First in Tab Order
                </Button>
            </div>

            <div class="space-y-2">
                <p class="text-xs text-gray-500">RenderAs (Custom Component)</p>
                <Button RenderAs="typeof(CustomButtonWrapper)"
                        class="rounded border-2 border-dashed border-gray-400 p-2"
                        @onclick="HandleClick">
                    Wrapped Component
                </Button>
            </div>
        </div>
    </DemoSection>

</ComponentShowcase>

@code {
    [Parameter]
    public bool IsWasmMode { get; set; }

    private bool isLoading;
    private bool isStyleDisabled;
    private int clickCount;

    private async Task HandleOnClick()
    {
        isLoading = true;
        StateHasChanged();

        await Task.Delay(3000);

        isLoading = false;
        StateHasChanged();
    }

    private void HandleClick()
    {
        clickCount++;
        Console.WriteLine($"Button clicked! Count: {clickCount}");
    }
}