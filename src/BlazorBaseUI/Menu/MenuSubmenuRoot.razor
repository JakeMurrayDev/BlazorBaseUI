<CascadingValue TValue="MenuSubmenuRootContext" Value="submenuContext" IsFixed="true">
    <MenuRoot Open="Open"
              DefaultOpen="DefaultOpen"
              Disabled="Disabled"
              CloseParentOnEsc="CloseParentOnEsc"
              Direction="Direction"
              LoopFocus="LoopFocus"
              ActionsRef="ActionsRef"
              OpenChanged="OpenChanged"
              OnOpenChange="OnOpenChange"
              OnOpenChangeComplete="OnOpenChangeComplete">
        @ChildContent
    </MenuRoot>
</CascadingValue>

@code {
    private MenuSubmenuRootContext? submenuContext;

    [CascadingParameter]
    private MenuRootContext? ParentMenuContext { get; set; }

    /// <summary>
    /// Gets or sets whether the submenu is currently open.
    /// </summary>
    [Parameter]
    public bool? Open { get; set; }

    /// <summary>
    /// Determines whether the submenu is initially open.
    /// Defaults to <see langword="false"/>.
    /// </summary>
    [Parameter]
    public bool DefaultOpen { get; set; }

    /// <summary>
    /// Determines whether the component should ignore user interaction.
    /// Defaults to <see langword="false"/>.
    /// </summary>
    [Parameter]
    public bool Disabled { get; set; }

    /// <summary>
    /// Determines whether pressing the Escape key closes the parent menu in a submenu context.
    /// Defaults to <see langword="false"/>.
    /// </summary>
    [Parameter]
    public bool CloseParentOnEsc { get; set; }

    /// <summary>
    /// Gets or sets the text direction of the submenu.
    /// </summary>
    [Parameter]
    public TextDirection Direction { get; set; } = TextDirection.Ltr;

    /// <summary>
    /// Determines whether keyboard focus loops back to the first item when the end of the list is reached while using the arrow keys.
    /// Defaults to <see langword="true"/>.
    /// </summary>
    [Parameter]
    public bool LoopFocus { get; set; } = true;

    /// <summary>
    /// Gets or sets a reference to imperative actions for controlling the menu programmatically.
    /// </summary>
    [Parameter]
    public MenuRootActions? ActionsRef { get; set; }

    /// <summary>
    /// Gets or sets the callback for two-way binding of the open state.
    /// </summary>
    [Parameter]
    public EventCallback<bool> OpenChanged { get; set; }

    /// <summary>
    /// Gets or sets the callback invoked when the menu is opened or closed.
    /// </summary>
    [Parameter]
    public EventCallback<MenuOpenChangeEventArgs> OnOpenChange { get; set; }

    /// <summary>
    /// Gets or sets the callback invoked after any open/close transition animations complete.
    /// </summary>
    [Parameter]
    public EventCallback<bool> OnOpenChangeComplete { get; set; }

    /// <summary>
    /// Defines the child components of this instance.
    /// </summary>
    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    /// <inheritdoc />
    protected override void OnParametersSet()
    {
        submenuContext = new MenuSubmenuRootContext { ParentMenu = ParentMenuContext };
    }
}
